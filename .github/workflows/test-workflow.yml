## do not touch anything after this
defaults:
  run:
    shell: bash
#    working-directory: /scripts/sample-script
on:
  workflow_call:
  push:
    branches:
      - main
      - feature_*
jobs:
  test-job:
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@master
    - name: reattach HEAD to Head Ref
      run: git checkout "$(echo ${{ github.head_ref }} | sed -E 's|refs/[a-zA-Z]+/||')"
      if: github.head_ref != ''
    - name: reattach HEAD to Ref
      run: git checkout "$(echo ${{ github.ref }} | sed -E 's|refs/[a-zA-Z]+/||')"
      if: github.head_ref == ''
    - name: run test script
      #uses: ./scripts/sample-script
      run: |
        echo $(ls)
        cd ./scripts/sample-script
        bash runTests.sh
        # bash run-tests.sh [pass in the test_directory argument]
